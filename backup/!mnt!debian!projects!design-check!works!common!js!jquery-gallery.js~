/*
 * jquery-gallery 0.2 (25-11-2007)
 *
 * Copyright (c) 2007 Queli Coto (http://www.noth.es)
 * Lincencia bajo CC
 * Built upon jQuery 1.2 (http://jquery.com)
 */



jQuery(funtion($) {



	$(document).ready(crearGaleria);

	$.fn.crearGaleria = function( option )
	{
	    var self = this;
	    var options = $.extend({
	    }, option);

	    function crearGaleria ()
	    {
		//cargamos el title y la descripcion de la primera imagen
		var title = $(self).find("dt img").attr('title');
		//conseguimos el ancho y la altura de nuestra galer?ia
		//var height = $(self).find("dt img").height();
		//var width = $(self).find("dt img").width();
		//$(self).find("dt").css({ width: width-10, height: height });
		var descripcion = $(self).find("dt img").attr('alt');
		$(self).find("dt").append("<p><strong>"+ title+"</strong> "+ descripcion +"</b>");
	  	$(self).find("dt p").hide();
	  	$(self).find("dt p").fadeIn('slow');
	  	
		//inicializamos los click en las imagenes
		$(self).find("dd img").click( function() { 
			var urlImagen = $(this).parent().attr('href');
			var urlImagenBig =$(this).parent().attr('rev');
			var title = $(this).attr('title');
			var descripcion = $(this).attr('alt');
			ocultarFoto(urlImagen,urlImagenBig, title, descripcion);
			return false; //cancelamos el click en el a 
		} );
	    }

	    function ocultarFoto(url,urlBig,title,descripcion)
	    {
		$(self).find("dt p").fadeOut();
		$(self).find("dt img").animate({ 
			left: 50, opacity: 'hide' 
		}, 1000, function() {
		    var i = new Image();
		    i.src = url;
		    i.onload =  function() { 
		    $(".slideShowGallery1 dt img").attr('src',url);
						       //alert("Hello"); 
						       ///alert(descripcion);
						       $(self).find("dt img").animate({ 
							       left: 50, opacity: 'show' , src : url
								   }, 1000,function() {
											  $(self).find("dt a").attr('href',urlBig);
											  $(self).find("dt a").attr('title',title+" / "+ descripcion);
											  
											  $(self).find("dt").append("<p><strong>"+ title+"</strong> "+ descripcion +"</b>");
											  $(self).find("dt p").hide();
											  $(self).find("dt p").fadeIn('slow');
											  $(self).find("dt p").css('opacity',0.6);
										      } );
						   };
						   
					       });
	    }
	}

	$.fn.image = function(src, f){
	    return this.each(function(){
	        var i = new Image();
	        i.src = src;
	        i.onload = f;
	        this.appendChild(i);
	    });
	 }
});


